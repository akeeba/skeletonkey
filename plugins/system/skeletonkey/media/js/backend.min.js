"use strict";(function(a,b){if(!a.Joomla)throw new Error("Joomla API was not properly initialised");var c=function(){var a=Joomla.getOptions("plg_system_skeletonkey"),c=b.querySelectorAll("table#userList>tbody tr");!c||1>c.length||c.forEach(function(c){var d=c.querySelectorAll("td"),e=1*d[d.length-1].textContent;if(-1!==a.loginUsers.indexOf(e)){var f=c.querySelectorAll("th div.btn-group"),g=f[0],h=b.createElement("span");h.classList.add("fa","fa-external-link-alt","pe-1"),h.setAttribute("aria-hidden","true");var i=b.createElement("span");i.textContent=Joomla.Text._("PLG_SYSTEM_SKELETONKEY_BTN_LABEL");var j=b.createElement("button");j.setAttribute("type","button"),j.dataset.userid=e,j.classList.add("btn","btn-dark","btn-sm","button-skeletonkey"),j.appendChild(h),j.appendChild(i),g.appendChild(j)}})},d=function(){b.querySelectorAll(".button-skeletonkey").forEach(function(a){a.addEventListener("click",e)})},e=function(b){b.preventDefault();var c=b.currentTarget.dataset.userid;if("undefined"!=typeof c&&c){var d=Joomla.getOptions("system.paths"),e=Joomla.getOptions("csrf.token"),f="".concat(d?"".concat(d.base,"/index.php"):a.location.pathname,"?option=com_ajax&format=json&plugin=skeletonkey&group=system&user_id=%d").concat(e?"&".concat(e,"=1"):"");Joomla.renderMessages({info:["Making request..."]}),Joomla.request({url:f.replace("%d",c.toString()),onSuccess:function(b){var c=JSON.parse(b).data;return c&&!1!==c[0]?void a.open(d.rootFull,"_blank"):void Joomla.renderMessages({error:[Joomla.Text._("PLG_SYSTEM_SKELETONKEY_ERR_LOGINFAILED")]})},onError:function(){Joomla.renderMessages({error:[Joomla.Text._("PLG_SYSTEM_SKELETONKEY_ERR_LOGINFAILED_AJAX")]})}})}};(function(){c(),d()})()})(window,document);
//# sourceMappingURL=backend.min.js.map